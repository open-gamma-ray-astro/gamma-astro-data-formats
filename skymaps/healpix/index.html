<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HEALPix Formats &mdash; Data formats for gamma-ray astronomy 0.3.dev documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="WCS Formats" href="../wcs/index.html" />
    <link rel="prev" title="Sky Maps" href="../index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Data formats for gamma-ray astronomy
          </a>
              <div class="version">
                0.3.dev
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../general/index.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../events/index.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../irfs/index.html">IRFs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_storage/index.html">Data storage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Sky Maps</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">HEALPix Formats</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#non-standard-healpix-conventions">Non-Standard HEALPix Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-files">Sample Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#skymap-hdu">SKYMAP HDU</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#header-keywords">Header Keywords</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#healpix-region-string">HEALPix Region String</a></li>
<li class="toctree-l3"><a class="reference internal" href="#implicit-format">IMPLICIT Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#header">HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skymap-columns">SKYMAP Columns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#explicit-format">EXPLICIT Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">SKYMAP Columns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#local-format">LOCAL Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">SKYMAP Columns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sparse-format">SPARSE Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">HEADER</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">SKYMAP Columns</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../wcs/index.html">WCS Formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#bands-hdu">BANDS HDU</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../spectra/index.html">Spectra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../lightcurves/index.html">Light curves</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Data formats for gamma-ray astronomy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Sky Maps</a> &raquo;</li>
      <li>HEALPix Formats</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/skymaps/healpix/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>This page describes data format conventions for FITS binned data and model
representations pixelized with the <a class="reference external" href="http://healpix.jpl.nasa.gov/">HEALPix algorithm</a>.</p>
<section id="healpix-formats">
<span id="healpix-skymap"></span><h1>HEALPix Formats<a class="headerlink" href="#healpix-formats" title="Permalink to this headline">¶</a></h1>
<p>This section describes a proposal for HEALPix format conventions which
is based on formats currently used within the Fermi Science Tools
(STs) and pointlike.  This format is intended for representing maps
and cubes of both integral and differential quantities including:</p>
<ul class="simple">
<li><p>Photon count maps and cubes (e.g. as generated with with <em>gtbin</em>).</p></li>
<li><p>Exposure cubes (e.g. as generated with <em>gtexpcube2</em>).</p></li>
<li><p>Source maps – product of exposure with instrument response in
spatial dimension (e.g. as generated with <em>gtsrcmaps</em>).</p></li>
<li><p>Model maps and cubes (the Fermi IEM and other diffuse emission
components).</p></li>
</ul>
<p>The format defines a <a class="reference internal" href="#hpx-skymap-table"><span class="std std-ref">SKYMAP HDU</span></a> for storing a sequence of
image slices (<em>bands</em>) and a <a class="reference internal" href="../index.html#bands-hdu"><span class="std std-ref">BANDS HDU</span></a> to store the
geometry and coordinate mapping for each band.  A band can represent
any selection on non-spatial coordinates such as energy, time, or FoV
angle.  The most common use-case is a sequence of bands
representing energy bins (for counts maps) or energy nodes (for source
or model maps).</p>
<p>There are three primary HEALPix map formats which use different table
structures for mapping table entries to HEALPix pixel and band:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#hpx-implicit"><span class="std std-ref">IMPLICIT Format</span></a>: The row to pixel mapping is determined implicitly from
the row number.  The row number corresponds to the HEALPix pixel
number.</p></li>
<li><p><a class="reference internal" href="#hpx-explicit"><span class="std std-ref">EXPLICIT Format</span></a>: The row to pixel mapping is determined explicitly from
the <code class="docutils literal notranslate"><span class="pre">PIX</span></code> column.  This can be used to define maps or cubes that
only encompass a partial region of the sky.</p></li>
<li><p><a class="reference internal" href="#hpx-local"><span class="std std-ref">LOCAL Format</span></a>: The row to pixel mapping is determined explicitly
from the <code class="docutils literal notranslate"><span class="pre">PIX</span></code> column but with a local indexing scheme.  This can
be used to define maps or cubes that only encompass a partial region
of the sky.</p></li>
<li><p><a class="reference internal" href="#hpx-sparse"><span class="std std-ref">SPARSE Format</span></a>: The row to pixel mapping is determined explicitly
from the <code class="docutils literal notranslate"><span class="pre">PIX</span></code> column but with a variable number of pixels in each
band.  This format can be used to represent maps that have a
different spatial geometry in each band and also supports
band-dependent pixel size.</p></li>
</ul>
<p>Note that there are variations of these primary formats which use
different conventions for column, HDU, and header keywords names.  The
<code class="docutils literal notranslate"><span class="pre">HPX_CONV</span></code> keyword defines a specific mapping between the names used
here and in these other formats:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_CCUBE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_LTCUBE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_BEXPCUBE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_SRCMAP</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_TEMPLATE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FGST_SRCMAP_SPARSE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GALPROP</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">GALPROP2</span></code></p></li>
</ul>
<section id="non-standard-healpix-conventions">
<span id="hpx-conventions"></span><h2>Non-Standard HEALPix Conventions<a class="headerlink" href="#non-standard-healpix-conventions" title="Permalink to this headline">¶</a></h2>
</section>
<section id="sample-files">
<span id="hpx-sample-files"></span><h2>Sample Files<a class="headerlink" href="#sample-files" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All-sky Counts Cube (IMPLICIT Format): <a class="reference download internal" download="" href="../../_downloads/dfeef4eddb44832f534795fde9e08b8c/hpx_ccube_implicit.fits"><code class="xref download docutils literal notranslate"><span class="pre">FITS</span></code></a></p></li>
<li><p>Partial-sky Counts Cube (EXPLICIT Format): <a class="reference download internal" download="" href="../../_downloads/368b8bccbc0872756ee7c07b8d5c2388/hpx_ccube_explicit.fits"><code class="xref download docutils literal notranslate"><span class="pre">FITS</span></code></a></p></li>
<li><p>Partial-sky Counts Map (EXPLICIT Format): <a class="reference download internal" download="" href="../../_downloads/38bfa3f160d6905f5bc5964897628d58/hpx_cmap_explicit.fits"><code class="xref download docutils literal notranslate"><span class="pre">FITS</span></code></a></p></li>
<li><p>Partial-sky Counts Cube (SPARSE Format w/ fixed NSIDE):<a class="reference download internal" download="" href="../../_downloads/42825d2cf766badfe15ffbe0bbc47d92/hpx_ccube_sparse0.fits"><code class="xref download docutils literal notranslate"><span class="pre">FITS</span></code></a></p></li>
<li><p>Partial-sky Counts Cube (SPARSE Format w/ variable NSIDE):<a class="reference download internal" download="" href="../../_downloads/d9f2ac8fabeec751275c756a4e42aa35/hpx_ccube_sparse1.fits"><code class="xref download docutils literal notranslate"><span class="pre">FITS</span></code></a></p></li>
</ul>
</section>
<section id="skymap-hdu">
<span id="hpx-skymap-table"></span><h2>SKYMAP HDU<a class="headerlink" href="#skymap-hdu" title="Permalink to this headline">¶</a></h2>
<p>The SKYMAP table contains the map data and row-to-pixel mapping
formatted according to one of three indexing schemes specified by the
<code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code> header keyword: <a class="reference internal" href="#hpx-implicit"><span class="std std-ref">IMPLICIT Format</span></a>, <a class="reference internal" href="#hpx-explicit"><span class="std std-ref">EXPLICIT Format</span></a>,
or <a class="reference internal" href="#hpx-sparse"><span class="std std-ref">SPARSE Format</span></a>.  By convention if a file contains a single map
it is recommended to name the extension <code class="docutils literal notranslate"><span class="pre">SKYMAP</span></code>.  For maps with
non-spatial dimensions an accompanying BANDS table must also be
defined (see <a class="reference internal" href="../index.html#bands-hdu"><span class="std std-ref">BANDS HDU</span></a>).</p>
<section id="header-keywords">
<h3>Header Keywords<a class="headerlink" href="#header-keywords" title="Permalink to this headline">¶</a></h3>
<p>This section lists the keywords that should be written to the
SKYMAP BINTABLE header.  These keywords define the pixel size
and ordering scheme that was used to construct the HEALPix map.</p>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PIXTYPE</span></code>, type: string</dt><dd><ul>
<li><p>Should be set to <code class="docutils literal notranslate"><span class="pre">HEALPIX</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code>, type: string</dt><dd><ul>
<li><p>Indexing scheme.  Can be one of <code class="docutils literal notranslate"><span class="pre">IMPLICIT</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPLICIT</span></code>,
<code class="docutils literal notranslate"><span class="pre">SPARSE</span></code>.  If this keyword is not provided then the
<code class="docutils literal notranslate"><span class="pre">IMPLICIT</span></code> indexing scheme will be assumed.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ORDERING</span></code>, type: string</dt><dd><ul>
<li><p>HEALPix ordering scheme.   Can be <code class="docutils literal notranslate"><span class="pre">NESTED</span></code> or <code class="docutils literal notranslate"><span class="pre">RING</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">COORDSYS</span></code>, type: string</dt><dd><ul>
<li><p>Map coordinate system.  Can be <code class="docutils literal notranslate"><span class="pre">CEL</span></code> (celestial coordinates)
or <code class="docutils literal notranslate"><span class="pre">GAL</span></code> (galactic coordinates).</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ORDER</span></code>, type: int</dt><dd><ul>
<li><p>Healpix order.  <code class="docutils literal notranslate"><span class="pre">ORDER</span></code> = log2(<code class="docutils literal notranslate"><span class="pre">NSIDE</span></code>) if <code class="docutils literal notranslate"><span class="pre">NSIDE</span></code> is a
power of 2 and -1 otherwise.  If the <code class="docutils literal notranslate"><span class="pre">BANDS</span></code> table is defined
this keyword is superseded by the <code class="docutils literal notranslate"><span class="pre">NSIDE</span></code> column.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">NSIDE</span></code>, type: int</dt><dd><ul>
<li><p>Number of healpix pixels per side.  If the <code class="docutils literal notranslate"><span class="pre">BANDS</span></code> table is defined
this keyword is superseded by the <code class="docutils literal notranslate"><span class="pre">NSIDE</span></code> column.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FIRSTPIX</span></code>, type: int</dt><dd><ul>
<li><p>Index of first pixel in the map.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">LASTPIX</span></code>, type: int</dt><dd><ul>
<li><p>Index of last pixel in the map.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">HPX_REG</span></code>, type: string, <strong>optional</strong></dt><dd><ul>
<li><p>Region string for the geometric selection that was used to
construct a partial-sky map.  See <a class="reference internal" href="#hpx-region-string"><span class="std std-ref">HEALPix Region String</span></a> for
additional details.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">HPX_CONV</span></code>, type: string, <strong>optional</strong></dt><dd><ul>
<li><p>Convention for HEALPix format.  See <a class="reference internal" href="#hpx-conventions"><span class="std std-ref">Non-Standard HEALPix Conventions</span></a> for
additional details.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">BANDSHDU</span></code>, type: string, <strong>optional</strong></dt><dd><ul>
<li><p>Name of HDU containing the BANDS table.  If undefined the
extension name should be <code class="docutils literal notranslate"><span class="pre">EBOUNDS</span></code> or <code class="docutils literal notranslate"><span class="pre">ENERGIES</span></code>.  See
<a class="reference internal" href="../index.html#bands-hdu"><span class="std std-ref">BANDS HDU</span></a> for additional details.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="healpix-region-string">
<span id="hpx-region-string"></span><h2>HEALPix Region String<a class="headerlink" href="#healpix-region-string" title="Permalink to this headline">¶</a></h2>
<p>For partial-sky maps that correspond to a particular geometric
selection one can optionally specify the selection that was used in
constructing the map with the <code class="docutils literal notranslate"><span class="pre">HPX_REG</span></code> header keyword.  The
following region strings are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DISK({LON},{LAT},{RADIUS})</span></code>: A circular selection centered on the
coordinates (<code class="docutils literal notranslate"><span class="pre">{LON}</span></code>, <code class="docutils literal notranslate"><span class="pre">{LAT}</span></code>) with radius <code class="docutils literal notranslate"><span class="pre">{RADIUS}</span></code> with all
quantities given in degrees.  A pixel is included in the selection
if its center is within <code class="docutils literal notranslate"><span class="pre">{RADIUS}</span></code> deg of coordinates (<code class="docutils literal notranslate"><span class="pre">{LON}</span></code>,
<code class="docutils literal notranslate"><span class="pre">{LAT}</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DISK_INC({LON},{LAT},{RADIUS})</span></code>: A circular selection centered
on the coordinates (<code class="docutils literal notranslate"><span class="pre">{LON}</span></code>, <code class="docutils literal notranslate"><span class="pre">{LAT}</span></code>) with radius <code class="docutils literal notranslate"><span class="pre">{RADIUS}</span></code>
with all quantities given in degrees.  A pixel is included in the
selection if any part of it is encompassed by the circle.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HPX_PIXEL({ORDERING},{ORDER},{PIX})</span></code>: A selection encompassing
all pixels contained in the HEALPix pixel of the given pixelization
where ordering is <code class="docutils literal notranslate"><span class="pre">{ORDERING}</span></code> (i.e. <code class="docutils literal notranslate"><span class="pre">NESTED</span></code> or <code class="docutils literal notranslate"><span class="pre">RING</span></code>),
order is <code class="docutils literal notranslate"><span class="pre">{ORDER}</span></code>, and pixel index is <code class="docutils literal notranslate"><span class="pre">{PIX}</span></code>.</p></li>
</ul>
</section>
<section id="implicit-format">
<span id="hpx-implicit"></span><h2>IMPLICIT Format<a class="headerlink" href="#implicit-format" title="Permalink to this headline">¶</a></h2>
<p>The IMPLICIT format defines a one-to-one mapping between table row and
HEALPix pixel index.  Each energy plane is represented by a separate
column (<code class="docutils literal notranslate"><span class="pre">CHANNEL0</span></code>, <code class="docutils literal notranslate"><span class="pre">CHANNEL1</span></code>, etc.).  This format can only be
used for all-sky maps.</p>
<section id="header">
<h3>HEADER<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code> : <code class="docutils literal notranslate"><span class="pre">IMPLICIT</span></code></p></li>
</ul>
</section>
<section id="skymap-columns">
<h3>SKYMAP Columns<a class="headerlink" href="#skymap-columns" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">CHANNEL{BAND_IDX}</span></code> – ndim: 1, type: float or int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Amplitude in image plane <code class="docutils literal notranslate"><span class="pre">{BAND_IDX}</span></code>.  The HEALPix pixel
index is determined from the table row.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="explicit-format">
<span id="hpx-explicit"></span><h2>EXPLICIT Format<a class="headerlink" href="#explicit-format" title="Permalink to this headline">¶</a></h2>
<p>The EXPLICIT format uses an additional <code class="docutils literal notranslate"><span class="pre">PIX</span></code> column to explicitly
define the pixel number corresponding to each table row.  Pixel values
for each band are represented by a separate column (<code class="docutils literal notranslate"><span class="pre">CHANNEL0</span></code>,
<code class="docutils literal notranslate"><span class="pre">CHANNEL1</span></code>, etc.).  This format can be used for both all-sky and
partial-sky maps but requires the same pixel size for all bands.</p>
<section id="id1">
<h3>HEADER<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code> : <code class="docutils literal notranslate"><span class="pre">EXPLICIT</span></code></p></li>
</ul>
</section>
<section id="id2">
<h3>SKYMAP Columns<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PIX</span></code> – ndim: 1, unit: None, type: int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>HEALPix pixel index.  This index is common to all bands.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">CHANNEL{BAND_IDX}</span></code> – ndim: 1, type: float or int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Amplitude in HEALPix pixel <code class="docutils literal notranslate"><span class="pre">PIX</span></code> and band
<code class="docutils literal notranslate"><span class="pre">{BAND_IDX}</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="local-format">
<span id="hpx-local"></span><h2>LOCAL Format<a class="headerlink" href="#local-format" title="Permalink to this headline">¶</a></h2>
<p>The LOCAL format is identical to the <a class="reference internal" href="#hpx-explicit"><span class="std std-ref">EXPLICIT Format</span></a> with the
exception that the <code class="docutils literal notranslate"><span class="pre">PIX</span></code> column contains a local rather than global
HEALPix index.  The local HEALPix index is a mapping of global indices
in a partial-sky geometry to 0, …, N-1 where N is the total number of
pixels in the geometry.  For an all-sky geometry the local index is
equal to the global index.  This format can be used for both all-sky
and partial-sky maps as well as maps with a different pixel-size in
each band.</p>
<section id="id3">
<h3>HEADER<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code> : <code class="docutils literal notranslate"><span class="pre">LOCAL</span></code></p></li>
</ul>
</section>
<section id="id4">
<h3>SKYMAP Columns<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PIX</span></code> – ndim: 1, unit: None, type: int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Local HEALPix pixel index.  The mapping to global HEALPix index
is derived by finding the index of the ith pixel in the geometry
where pixels are ordered by their global index values.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">CHANNEL{BAND_IDX}</span></code> – ndim: 1, type: float or int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Amplitude in HEALPix pixel <code class="docutils literal notranslate"><span class="pre">PIX</span></code> and band
<code class="docutils literal notranslate"><span class="pre">{BAND_IDX}</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
<section id="sparse-format">
<span id="hpx-sparse"></span><h2>SPARSE Format<a class="headerlink" href="#sparse-format" title="Permalink to this headline">¶</a></h2>
<p>The SPARSE format allows for an arbitrary set of pixels to be defined
in each band.  The SKYMAP table contains three columns with the
pixel index, band index, and amplitude.  Pixel values for each band
are continguous and arranged in order of band index.  This format
supports an different HEALPix pixel size in each band defined by the
<code class="docutils literal notranslate"><span class="pre">NSIDE</span></code> column in the <code class="docutils literal notranslate"><span class="pre">BANDS</span></code> table.</p>
<p>Pixels that are undefined but contained within the geometric selection
are assumed to be zero while pixels outside the geometric selection
are undefined.  For counts data this allows for maps that only contain
pixels with at least one count.</p>
<section id="id5">
<h3>HEADER<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">INDXSCHM</span></code> : <code class="docutils literal notranslate"><span class="pre">SPARSE</span></code></p></li>
</ul>
</section>
<section id="id6">
<h3>SKYMAP Columns<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">PIX</span></code> – ndim: 1, unit: None, type: int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>HEALPix pixel index.  Pixels are ordered by band number.  The
row to band mapping is defined by the <code class="docutils literal notranslate"><span class="pre">CHANNEL</span></code> column.  The
column type may be either 32- or 64-bit depending on the maximum
index of the map geometry.  A 32-bit column type is sufficient
for maps with NSIDE as large as 8192.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">CHANNEL</span></code> – ndim: 1, unit: None, type: int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Band index.  This column is optional for maps with a single
band.  For efficiency it is recommended to represent this column
with a 16-bit integer.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">VALUE</span></code> – ndim: 1, unit: None, type: float or int</dt><dd><ul>
<li><p>Dimension: nrows</p></li>
<li><p>Amplitude in pixel indexed by <code class="docutils literal notranslate"><span class="pre">PIX</span></code> and <code class="docutils literal notranslate"><span class="pre">CHANNEL</span></code>.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../index.html" class="btn btn-neutral float-left" title="Sky Maps" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../wcs/index.html" class="btn btn-neutral float-right" title="WCS Formats" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018, Gamma-ray astronomy community.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>